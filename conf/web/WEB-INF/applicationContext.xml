<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:sec="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
  http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
  http://www.springframework.org/schema/aop
  http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
  http://www.springframework.org/schema/context
  http://www.springframework.org/schema/context/spring-context-2.5.xsd
  http://www.springframework.org/schema/tx
  http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
  http://www.springframework.org/schema/security
  http://www.springframework.org/schema/security/spring-security-2.0.xsd">

    <context:property-placeholder location="classpath:app.properties"/>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="springApplicationContext" class="com.topcoder.service.util.SpringApplicationContext"/>

    <!-- Services -->
    <bean id="projectServiceFacade" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="remote/ProjectServiceFacadeBean"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.facade.project.ProjectServiceFacade"/>
    </bean>

    <bean id="contestServiceFacade" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="ContestServiceFacadeBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.facade.contest.ContestServiceFacade"/>
    </bean>

    <bean id="pipelineServiceFacade" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="remote/PipelineServiceFacadeBean"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.pipeline.PipelineServiceFacade"/>
    </bean>

    <bean id="adminServiceFacade" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="remote/AdminServiceFacadeBean"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.facade.admin.AdminServiceFacade"/>
    </bean>

    <bean id="userService" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="UserServiceBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.user.UserService"/>
    </bean>

    <bean id="gamePlanService" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="GamePlanServiceBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.gameplan.GamePlanService"/>
    </bean>
    
    <bean id="projectContestsResultsExportAction" class="com.topcoder.direct.services.view.action.project.ProjectContestsResultsExportAction"
          scope="prototype" parent="baseDirectStrutsAction" init-method = "checkInit">
        <property name="fileUpload" ref="fileUpload" />
        <property name="studioSubmissionBase" value="${studio.submission.base}" />
        <property name="compositeReviewBaseURL" value="@onlinereview.compsitereview.url.prefix@"/>
        <property name="loginUrl" value="@onlinereview.login.url@"/>
        <property name="onlineReviewBaseURL" value="@onlinereview.url.base@"/>
        <property name="username" value="@onlinereview.login.username@"/>
        <property name="password" value="@onlinereview.login.password@"/>
    </bean>
    

    <bean id="projectServices" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="ProjectServicesBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.project.service.ProjectServices"/>
    </bean>

    <bean id="permissionServiceFacade" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="PermissionServiceFacadeBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.facade.permission.PermissionServiceFacade"/>
    </bean>

    <bean id="projectPaymentCalculator" class="com.topcoder.management.payment.calculator.impl.DefaultProjectPaymentCalculator">
    </bean>

    <!--  FileUpload -->
    <bean id="fileUpload" class="com.topcoder.servlet.request.LocalFileUpload">
        <constructor-arg index="0">
            <value>com.topcoder.servlet.request.LocalFileUpload</value>
        </constructor-arg>
    </bean>

    <bean id="studioFileUpload" class="com.topcoder.servlet.request.LocalFileUpload">
        <constructor-arg index="0">
            <value>com.topcoder.servlet.request.LocalStudioFileUpload</value>
        </constructor-arg>
    </bean>

     <bean id="userPreferenceHome" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="com.topcoder.web.ejb.user.UserPreferenceHome"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="true"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">@userBeanProviderUrl@</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.web.ejb.user.UserPreferenceHome"/>
    </bean>

    <!-- AuthenticationInterceptor -->
    <bean id="authenticationInterceptor"
          class="com.topcoder.direct.services.view.interceptors.AuthenticationInterceptor">
        <property name="loginPageName" value="anonymous"/>
        <property name="userSessionIdentityKey" value="user"/>
        <property name="redirectBackUrlIdentityKey" value="redirectBackUrl"/>
        <property name="authorizationURL" value="@authorizationUrl@"/>
    </bean>

    <!-- LoggingInterceptor -->
    <bean id="loggingInterceptor" class="com.topcoder.direct.services.view.interceptors.LoggingInterceptor">
        <constructor-arg index="0">
            <value>directLogger</value>
        </constructor-arg>
    </bean>

    <!-- ActionPreProcessor -->
    <bean id="actionPreProcessor"
          class="com.topcoder.direct.services.view.interceptor.ActionPreProcessor">
        <property name="loginProcessorClassName" value="@loginProcessor@"/>
    </bean>

    <bean id="referenceDataBean" class="com.topcoder.direct.services.configs.ReferenceDataBean">
        <property name="contestServiceFacade" ref="contestServiceFacade"/>
    </bean>

    <bean id="mimeTypeRetriever" class="com.topcoder.direct.services.view.action.contest.launch.MimeTypeRetriever"/>

    <!-- Actions -->
    <bean id="baseDirectStrutsAction"
          class="com.topcoder.direct.services.view.action.BaseDirectStrutsAction"
          abstract="true">
        <property name="projectServiceFacade" ref="projectServiceFacade"/>
        <property name="contestServiceFacade" ref="contestServiceFacade"/>
        <property name="pipelineServiceFacade" ref="pipelineServiceFacade"/>
        <property name="adminServiceFacade" ref="adminServiceFacade"/>
        <property name="referenceDataBean" ref="referenceDataBean"/>
        <property name="userService" ref="userService"/>
        <property name="projectServices" ref="projectServices"/>
        <property name="specificationReviewService" ref="specificationReviewService"/>
        <property name="userPreferenceHome" ref="userPreferenceHome"/>
        <property name="metadataKeyService" ref="directProjectMetadataKeyService"/>
        <property name="metadataService" ref="directProjectMetadataServices"/>
        <property name="permissionServiceFacade" ref="permissionServiceFacade"/>
        <property name="authorizationService" ref="groupAuthorizationService"/>
        <property name="milestoneResponsiblePersonService" ref="milestoneResponsiblePersonService"/>
        <property name="milestoneService" ref="milestoneService"/>
    </bean>

    <bean id="currentProjectOverviewAction"
          class="com.topcoder.direct.services.view.action.project.CurrentProjectOverviewAction"
           scope="prototype">
        <property name="projectServiceFacade" ref="projectServiceFacade"/>
        <property name="projectMetadataService" ref="directProjectMetadataServices"/>
        <property name="userService" ref="userService"/>
    </bean>

    <bean id="projectOverviewAction"
          class="com.topcoder.direct.services.view.action.project.ProjectOverviewAction" scope="prototype">
        <property name="projectServiceFacade" ref="projectServiceFacade"/>
        <property name="projectMetadataService" ref="directProjectMetadataServices"/>
        <property name="userService" ref="userService"/>
        <property name="permissionServiceFacade" ref="permissionServiceFacade"/>
        <property name="copilotProjectDAO" ref="copilotProjectDAO"/>
        <property name="memberProfileUrlBase" value="@member.profile.url.base@"/>
    </bean>

    <bean id="projectCopilotFeedbackAction" class="com.topcoder.direct.services.view.action.project.ProjectCopilotFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="copilotProjectDAO" ref="copilotProjectDAO"/>
    </bean>

    <bean id="manageCopilotFeedbackAction" class="com.topcoder.direct.services.view.action.admin.ManageCopilotFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="copilotProjectDAO" ref="copilotProjectDAO"/>
    </bean>

    <bean id="projectExportAction"
          class="com.topcoder.direct.services.view.action.project.ProjectOverviewAction" scope="prototype">
        <property name="projectServiceFacade" ref="projectServiceFacade"/>
        <property name="projectMetadataService" ref="directProjectMetadataServices"/>
        <property name="permissionServiceFacade" ref="permissionServiceFacade"/>
        <property name="userService" ref="userService"/>
        <property name="copilotProjectDAO" ref="copilotProjectDAO"/>
        <property name="export" value="true"/>
    </bean>

    <bean id="instantSearchAction" class="com.topcoder.direct.services.view.action.search.InstantSearchAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>
    
    <bean id="projectMilestoneViewAction" class="com.topcoder.direct.services.view.action.project.milestone.ProjectMilestoneViewAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="updateProjectStatusAction" class="com.topcoder.direct.services.view.action.project.UpdateProjectStatusAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>
    
    <bean id="projectMilestoneOperationAction" class="com.topcoder.direct.services.view.action.project.milestone.ProjectMilestoneOperationAction"
              scope="prototype" parent="baseDirectStrutsAction">
        </bean>

    <bean id="dashboardSearchAction"
          class="com.topcoder.direct.services.view.action.dashboard.DashboardSearchAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="dashboardMilestoneCalendar"
          class="com.topcoder.direct.services.view.action.dashboard.DashboardMilestoneCalendarAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="dashboardSendFeedback"
          class="com.topcoder.direct.services.view.action.dashboard.DashboardSendFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="commonAction" class="com.topcoder.direct.services.view.action.contest.launch.CommonAction"
          parent="baseDirectStrutsAction">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.actions.ContestFeesHomeAction"/>
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
        <property name="userGroupsApiEndpoint" value="@userGroupsApiEndpoint@"/>
    </bean>

    <bean id="projectAction" class="com.topcoder.direct.services.view.action.contest.launch.ProjectAction"
          parent="baseDirectStrutsAction"
          abstract="true">
    </bean>

    <bean id="contestAction" class="com.topcoder.direct.services.view.action.contest.launch.ContestAction"
          parent="baseDirectStrutsAction"
          abstract="true">
    </bean>

    <bean id="enterpriseDashboardEntryAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.BaseDashboardAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="enterpriseDashboardEntryFuturePeekAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.BaseDashboardAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="allowFuturePeek" value="true"/>
    </bean>

    <bean id="enterpriseDashboardPipelineEntryAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.BaseDashboardAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="allowFuturePeek" value="true"/>
        <property name="defaultProjectStatus" value="0"/>
    </bean>

    <bean id="enterpriseDashboardFinancialEntryAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.BaseDashboardAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="allowFuturePeek" value="true"/>
        <property name="defaultProjectStatus" value="0"/>
    </bean>

    <bean id="enterpriseDashboardFinancialAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.DashboardFinancialAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="enterpriseDashboardPipelineAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.DashboardPipelineAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="enterpriseDashboardRoadmapAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.DashboardRoadmapAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="enterpriseDashboardAnalysisAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.DashboardAnalysisAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="enterpriseDashboardProjectsAction" class="com.topcoder.direct.services.view.action.enterpriseDashboard.DashboardProjectsAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="platformSpecialistsReportAction" class="com.topcoder.direct.services.view.action.report.PlatformSpecialistsReportAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="launchContestAction" class="com.topcoder.direct.services.view.action.contest.launch.LaunchContestAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="createProjectAction" class="com.topcoder.direct.services.view.action.contest.launch.CreateProjectAction"
          parent="projectAction" scope="prototype">
    </bean>

    <bean id="saveDraftContestAction"
          class="com.topcoder.direct.services.view.action.contest.launch.SaveDraftContestAction"
          parent="contestAction" scope="prototype">
        <property name="userGroupsApiEndpoint" value="@userGroupsApiEndpoint@"/>
    </bean>

    <bean id="documentUploadAction" class="com.topcoder.direct.services.view.action.contest.launch.DocumentUploadAction"
          parent="contestAction" scope="prototype">
        <property name="mimeTypeRetriever" ref="mimeTypeRetriever"/>
        <property name="fileSizeLimitExceededMessage" value="The upload is over the limit of 20M"/>
    </bean>
    
    <bean id="imageUploadAction" class="com.topcoder.direct.services.view.action.contest.launch.ImageUploadAction"
          parent="contestAction" scope="prototype">
        <property name="mimeTypeRetriever" ref="mimeTypeRetriever"/>
        <property name="fileSizeLimitExceededMessage" value="The upload is over the limit of 20M"/>
    </bean>

    <bean id="removeDocumentAction" class="com.topcoder.direct.services.view.action.contest.launch.RemoveDocumentAction"
          parent="contestAction" scope="prototype">
    </bean>

    <bean id="downloadDocumentAction"
          class="com.topcoder.direct.services.view.action.contest.launch.DownloadDocumentAction"
          parent="contestAction" scope="prototype">
    </bean>

    <bean id="getCapacityFullDatesAction"
          class="com.topcoder.direct.services.view.action.contest.launch.GetCapacityFullDatesAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="repostAction" class="com.topcoder.direct.services.view.action.contest.RepostAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="newVersionAction" class="com.topcoder.direct.services.view.action.contest.NewVersionAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="dashboardSettingAction"
          class="com.topcoder.direct.services.view.action.setting.DashboardSettingAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="dashboardNotificationsAction"
          class="com.topcoder.direct.services.view.action.setting.notification.DashboardNotificationsAction"
          parent="dashboardSettingAction" scope="prototype">
    </bean>

    <bean id="updateNotificationsAction"
          class="com.topcoder.direct.services.view.action.setting.notification.UpdateNotificationsAction"
          parent="baseDirectStrutsAction" scope="prototype">
    </bean>

    <bean id="copilotContestDetailsAction" class="com.topcoder.direct.services.view.action.contest.launch.GetContestAction"
          parent="contestAction" scope="prototype">
          <property name="type" value="COPILOT_CONTEST" />
    </bean>

    <bean id="publicTopCoderRoadmap" class="com.topcoder.direct.services.view.action.roadmap.PublicRoadMapAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="clientName" value="TopCoder" />
        <property name="completedMilestonePastDays" value="150"/>
        <property name="channelTitle" value="TopCoder Roadmap"/>
        <property name="channelDescription" value="Road Map of the TopCoder systems development" />
        <property name="channelLink" value="https://www.topcoder.com/direct/TopCoderRoadmap" />
    </bean>

    <bean id="contestDetailAction" class="com.topcoder.direct.services.view.action.contest.launch.GetContestAction"
          parent="contestAction" scope="prototype">
          <property name="type" value="CONTEST" />
          <property name="timelineInterval" value="1"/>
<!--
          <property name="marathonMatchAnalyticsService" ref="marathonMatchAnalyticsService"/>
-->
    </bean>

    <bean id="contestDetailJSONAction" class="com.topcoder.direct.services.view.action.contest.launch.GetContestAction"
          parent="contestAction" scope="prototype">
          <property name="type" value="CONTEST_JSON" />
          <property name="timelineInterval" value="1"/>
          <property name="userGroupsApiEndpoint" value="@userGroupsApiEndpoint@"/>
<!--
          <property name="marathonMatchAnalyticsService" ref="marathonMatchAnalyticsService"/>
-->
    </bean>

    <!-- we need this type to avoid to store session value  -->
    <bean id="getContestReceiptAction" class="com.topcoder.direct.services.view.action.contest.launch.GetContestReceiptAction"
          parent="contestDetailAction" scope="prototype">
    </bean>

    <bean id="editCockpitProjectAction" class="com.topcoder.direct.services.view.action.project.edit.EditCockpitProjectAction"
            parent="baseDirectStrutsAction" scope="prototype">
        <property name="groupService" ref="groupService"/>
    </bean>

    <bean id="projectPlannerAction"
          class="com.topcoder.direct.services.view.action.project.planner.ProjectPlannerAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean id="saveCockpitProjectSettingAction" class="com.topcoder.direct.services.view.action.project.edit.SaveCockpitProjectSettingAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="groupService" ref="groupService"/>
        <property name="projectContestFeeService" ref="contestFeeService"/>
        <property name="projectContestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean id="batchDraftContestsEditAction" class="com.topcoder.direct.services.view.action.project.ProjectDraftContestsBatchEditAction"
          parent="baseDirectStrutsAction" scope="prototype">
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean id="clientInvoiceManageAction"
          class="com.topcoder.direct.services.view.action.accounting.ClientInvoiceManageAction"
          scope="prototype"  parent="baseDirectStrutsAction">
        <property name="clientService" ref="groupClientService"/>
        <property name="invoiceUploadPersistence" ref="clientInvoiceUploadPersistence"/>
        <property name="invoiceUploadRootPath" value="@invoiceUploadRootPath@"/>
    </bean>

    <bean id="projectGamePlanDataAction"
          class="com.topcoder.direct.services.view.action.project.CurrentProjectGamePlanAction"
          scope="prototype">
        <property name="gamePlanService" ref="gamePlanService"/>
        <property name="projectServiceFacade" ref="projectServiceFacade"/>
        <property name="milestoneService" ref="milestoneService"/>
    </bean>

    <bean id="saveChallengeConfirmation"
          class="com.topcoder.direct.services.view.action.setting.ChallengeConfirmationPreferenceAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="contestSubmissionsAction"
          class="com.topcoder.direct.services.view.action.contest.ContestSubmissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="studioSubmissionAction"
          class="com.topcoder.direct.services.view.action.contest.StudioSubmissionAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="updateStudioSubmissionFeedbackAction"
          class="com.topcoder.direct.services.view.action.contest.UpdateContestSubmissionFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="hasStudioSubmissionFeedbackAction"
          class="com.topcoder.direct.services.view.action.contest.HasContestSubmissionFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="studioSubmissionCheckoutAction"
        class="com.topcoder.direct.services.view.action.contest.ContestSubmissionsCheckoutAction"
        scope="prototype" parent="baseDirectStrutsAction"></bean>

    <bean id="saveContestSubmissionRankAction"
        class="com.topcoder.direct.services.view.action.contest.SaveContestSubmissionRankAction"
        scope="prototype" parent="baseDirectStrutsAction"></bean>

    <bean id="getProjectPermissionsAction"
          class="com.topcoder.direct.services.view.action.dashboard.GetProjectPermissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="costCalculationService" class="com.topcoder.direct.services.view.util.challenge.CostCalculationService" factory-method="getInstance">
        <property name="projectServices" ref="projectServices"/>
        <property name="templateManager" ref="templateManager"/>
        <property name="projectPaymentCalculator" ref="projectPaymentCalculator"/>
    </bean>

    <bean id="getReviewCostAction" class="com.topcoder.direct.services.view.action.contest.launch.GetReviewCostAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>


    <bean id="searchUserAction"
          class="com.topcoder.direct.services.view.action.dashboard.SearchUserAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="updateProjectPermissionsAction"
          class="com.topcoder.direct.services.view.action.dashboard.UpdateProjectPermissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="permissionsUpdateSuccessAction" class="com.topcoder.direct.services.view.action.ForwardAction"
          scope="prototype">
        <property name="actionMessages">
            <list>
                <value>Permissions have been updated successfully</value>
            </list>
        </property>
    </bean>

    <bean id="softwareContestSubmissionsAction"
          class="com.topcoder.direct.services.view.action.contest.SoftwareContestSubmissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="studioNoWinnerAction"
          class="com.topcoder.direct.services.view.action.contest.StudioNoWinnerAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="studioAbandonContestAction"
          class="com.topcoder.direct.services.view.action.contest.StudioNoWinnerAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="abandonContest" value="true"/>
    </bean>

    <bean id="updateStudioGeneralFeedbackAction"
          class="com.topcoder.direct.services.view.action.contest.UpdateGeneralSubmissionsFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="hasStudioGeneralFeedbackAction"
          class="com.topcoder.direct.services.view.action.contest.HasGeneralSubmissionsFeedbackAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>


     <!-- Since specification review assembly -->
    <bean id="specificationReviewService" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="SpecificationReviewServiceBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.review.specification.SpecificationReviewService"/>
    </bean>

    <bean id="specReviewCommentService" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="SpecReviewCommentServiceBean/remote"/>
        <property name="cache" value="true"/>
        <property name="lookupOnStartup" value="false"/>
        <property name="jndiEnvironment">
            <props>
                <prop key="java.naming.factory.initial">org.jnp.interfaces.NamingContextFactory
                </prop>
                <prop key="java.naming.provider.url">${service.provder.url}</prop>
                <prop key="java.naming.factory.url.pkgs">org.jboss.naming:org.jnp.interfaces
                </prop>
            </props>
        </property>
        <property name="proxyInterface" value="com.topcoder.service.review.comment.specification.SpecReviewCommentService"/>
    </bean>

    <bean id="specificationReviewAction"
          class="com.topcoder.direct.services.view.action.specreview.SpecificationReviewAction"
          abstract="true">
    </bean>

    <bean id="startSpecificationReviewAction"
          class="com.topcoder.direct.services.view.action.specreview.StartSpecificationReviewAction"
          scope="prototype" parent="specificationReviewAction">
        <property name="specificationReviewService" ref="specificationReviewService"/>
        <property name="contestServiceFacade" ref="contestServiceFacade"/>
    </bean>

    <bean id="viewSpecReviewAction"
          class="com.topcoder.direct.services.view.action.specreview.ViewSpecificationReviewAction"
          scope="prototype" parent="specificationReviewAction">
        <property name="specificationReviewService" ref="specificationReviewService"/>
        <property name="specReviewCommentService" ref="specReviewCommentService"/>
        <property name="userService" ref="userService"/>
    <property name="contestServiceFacade" ref="contestServiceFacade"/>
    </bean>

    <bean id="saveSpecReviewCommentAction"
          class="com.topcoder.direct.services.view.action.specreview.SaveSpecificationReviewCommentAction"
          scope="prototype" parent="specificationReviewAction">
        <property name="specReviewCommentService" ref="specReviewCommentService"/>
    </bean>

    <bean id="resubmitSpecReviewAction"
          class="com.topcoder.direct.services.view.action.specreview.ResubmitSpecificationReviewAction"
          scope="prototype" parent="specificationReviewAction">
        <property name="specificationReviewService" ref="specificationReviewService"/>
    </bean>
     <bean id="dashboardReportsAction"
          class="com.topcoder.direct.services.view.action.report.DashboardPipelineAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="viewData.showJustForm" value="true"/>
    </bean>

    <bean id="dashboardPipelineAction"
          class="com.topcoder.direct.services.view.action.report.DashboardPipelineAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="viewData.showJustForm" value="false"/>
    </bean>

    <bean id="dashboardShowCostReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardCostReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="viewData.showJustForm" value="true"/>
    </bean>

    <bean id="dashboardCostReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardCostReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="viewData.showJustForm" value="false"/>
    </bean>

    <bean id="dashboardShowParticipationReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardParticipationMetricsReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
          <property name="viewData.showJustForm" value="true"/>
    </bean>
    
    <bean id="dashboardProjectMetricsReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardProjectMetricsReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
          <property name="viewData.showJustForm" value="false"/>
    </bean>

    
    <bean id="dashboardShowProjectMetricsReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardProjectMetricsReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
          <property name="viewData.showJustForm" value="true"/>
    </bean>

    <bean id="dashboardParticipationReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardParticipationMetricsReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
          <property name="viewData.showJustForm" value="false"/>
    </bean>

    <bean id="dashboardShowBillingCostReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardBillingCostReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="viewData.showJustForm" value="true"/>
    </bean>

    <bean id="reportCommonAction"
          class="com.topcoder.direct.services.view.action.report.ReportCommonAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="updateInvoiceRecordsAction"
          class="com.topcoder.direct.services.view.action.report.UpdateInvoiceRecordsAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="invoiceRecordDAO" ref="invoiceRecordDAO"/>
        <property name="invoiceDAO" ref="invoiceDAO"/>
        <property name="lookupDAO" ref="invoiceLookupDAO"/>
        <property name="transactionManager" ref="txManager"/>
    </bean>

    <bean id="updateInvoiceAction"
          class="com.topcoder.direct.services.view.action.report.UpdateInvoiceAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="invoiceRecordDAO" ref="invoiceRecordDAO"/>
        <property name="invoiceDAO" ref="invoiceDAO"/>
        <property name="transactionManager" ref="txManager"/>
    </bean>

    <bean id="updateWesternUnionBalanceAmountAction"
          class="com.topcoder.direct.services.view.action.payments.UpdateWesternUnionBalanceAmountAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="westernUnionService" ref="westernUnionService"/>
    </bean>

    <bean id="dashboardBillingCostReportAction"
          class="com.topcoder.direct.services.view.action.report.DashboardBillingCostReportAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="viewData.showJustForm" value="false"/>
        <!-- <property name="invoiceRecordDAO" ref="invoiceRecordDAO"/> -->
        <property name="lookupDAO" ref="invoiceLookupDAO"/>
    </bean>

    <bean id="enterpriseDashboardAction"
          class="com.topcoder.direct.services.view.action.dashboard.EnterpriseDashboardAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="isAJAX" value="false"/>
    </bean>

    <bean id="enterpriseDashboardHealthAction"
          class="com.topcoder.direct.services.view.action.dashboard.EnterpriseDashboardHealthAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="dashboardPipelineDraftsRatioAction"
          class="com.topcoder.direct.services.view.action.report.DashboardPipelineDraftsRatioAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="createNewProjectAction"
          class="com.topcoder.direct.services.view.action.CreateNewProjectAction"
          scope="prototype" parent="baseDirectStrutsAction">
          <property name="copilotURLPrefix" value="http://community.topcoder.com/tc?module=ProjectDetail&amp;pj="/>
          <property name="groupService" ref="groupService"/>
          <property name="projectContestFeeService" ref="contestFeeService"/>
          <property name="projectContestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean id="viewCreateNewProjectAction"
          class="com.topcoder.direct.services.view.action.ViewCreateNewProjectAction"
          scope="prototype">
        <property name="projectServiceFacade" ref="projectServiceFacade"/>
        <property name="groupService" ref="groupService"/>
    </bean>

        <!-- For Copilot Profile and Copilot Project DAO-->
    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName">
            <value>java:TCS_CATALOG</value>
        </property>
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="mappingResources">
            <list>
          <value>/META-INF/mapping.hbm.xml</value>
                <value>META-INF/invoiceMapping.hbm.xml</value>
                <value>META-INF/Milestone.hbm.xml</value>
                <value>META-INF/ResponsiblePerson.hbm.xml</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=org.hibernate.dialect.InformixDialect
                hibernate.show_sql=false
            </value>
        </property>
    </bean>

    <bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="txManager"/>

    <bean name="copilotBaseDAO" abstract="true">
        <property name="loggerName" value="copilotBaseDAO"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean id="milestoneLogger" class="com.topcoder.util.log.LogManager"
            factory-method="getLog">
            <constructor-arg value="milestoneLogger" />
    </bean>

    <bean name="milestoneResponsiblePersonService" class="com.topcoder.direct.services.project.milestone.hibernate.HibernateResponsiblePersonService">
        <property name="logger" ref="milestoneLogger"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean name="milestoneService" class="com.topcoder.direct.services.project.milestone.hibernate.HibernateMilestoneService">
            <property name="logger" ref="milestoneLogger"/>
            <property name="sessionFactory" ref="sessionFactory"/>
            <property name="responsiblePersonService" ref="milestoneResponsiblePersonService"/>
     </bean>

    <bean name="invoiceBaseDAO" abstract="true">
        <property name="loggerName" value="invoiceBaseDAO"/>
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <bean name="copilotProfileDAO" class="com.topcoder.direct.services.copilot.dao.impl.CopilotProfileDAOImpl"
          parent="copilotBaseDAO"/>

    <bean name="copilotProjectDAO" class="com.topcoder.direct.services.copilot.dao.impl.CopilotProjectDAOImpl"
          parent="copilotBaseDAO"/>

    <bean name="lookupDAO" class="com.topcoder.direct.services.copilot.dao.impl.LookupDAOImpl"
          parent="copilotBaseDAO"/>

    <bean name="invoiceRecordDAO" class="com.topcoder.clients.invoices.dao.impl.InvoiceRecordDAOImpl"
          parent="invoiceBaseDAO"/>

    <bean name="invoiceDAO" class="com.topcoder.clients.invoices.dao.impl.InvoiceDAOImpl"
          parent="invoiceBaseDAO"/>

    <bean name="invoiceLookupDAO" class="com.topcoder.clients.invoices.dao.impl.LookupDAOImpl"
          parent="invoiceBaseDAO"/>

    <bean id="copilotManageAction"
      class="com.topcoder.direct.services.view.action.copilot.CopilotManageAction"
      scope="prototype" parent="baseDirectStrutsAction">
        <property name="copilotProfileDAO" ref="copilotProfileDAO"/>
    </bean>

    <bean id="copilotProjectAction"
      class="com.topcoder.direct.services.view.action.copilot.CopilotProjectAction"
      scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="listCopilotContestsAction"
          class="com.topcoder.direct.services.view.action.copilot.ListCopilotContestsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="copilotContestsRegistrantsAction"
          class="com.topcoder.direct.services.view.action.contest.ContestRegistrantsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="copilotPostingContestSubmissionsAction"
          class="com.topcoder.direct.services.view.action.contest.SoftwareContestSubmissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="previewCopilotSubmissionAction"
          class="com.topcoder.direct.services.view.action.copilot.PreviewCopilotSubmissionAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="fileUpload" ref="fileUpload"/>
    </bean>

    <bean id="selectCopilotAction"
          class="com.topcoder.direct.services.view.action.copilot.SelectCopilotAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="allCopilotsListAction"
          class="com.topcoder.direct.services.view.action.copilot.AllCopilotsListAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="copilotProfileDAO" ref="copilotProfileDAO"/>
    </bean>

    <bean id="zoomEnterpriseDashboardAction"
          class="com.topcoder.direct.services.view.action.dashboard.ZoomEnterpriseDashboardAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="isAJAX" value="true"/>
    </bean>

    <bean id="zoomEnterpriseDashboardVolumeView"
          class="com.topcoder.direct.services.view.action.dashboard.ZoomEnterpriseDashboardAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="isAJAX" value="true"/>
        <property name="dashboardViewType" value="volumeView"/>
    </bean>

     <bean id="dashboardEnterpriseVolumeView"
          class="com.topcoder.direct.services.view.action.dashboard.EnterpriseDashboardAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="isAJAX" value="true"/>
        <property name="dashboardViewType" value="volumeView"/>
    </bean>

    <bean id="ajaxEnterpriseDashboardAction"
          class="com.topcoder.direct.services.view.action.dashboard.EnterpriseDashboardAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="isAJAX" value="true"/>
    </bean>

    <bean id="downloadAllSoftwareCheckpointSubmissions"
          class="com.topcoder.direct.services.view.action.contest.DownloadAllSoftwareSubmissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="fileUpload" ref="fileUpload"/>
        <property name="studioFileUpload" ref="studioFileUpload"/>
        <property name="roundType" value="CHECKPOINT" />
        <property name="s3Bucket" value="@aws_s3_bucket@"/>
    </bean>

    <bean id="downloadAllSoftwareFinalSubmissions"
          class="com.topcoder.direct.services.view.action.contest.DownloadAllSoftwareSubmissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="fileUpload" ref="fileUpload"/>
        <property name="studioFileUpload" ref="studioFileUpload"/>
        <property name="roundType" value="FINAL" />
        <property name="s3Bucket" value="@aws_s3_bucket@"/>
    </bean>

    <bean id="downloadAllCopilotPostingSubmissions"
          class="com.topcoder.direct.services.view.action.contest.DownloadAllSoftwareSubmissionsAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="fileUpload" ref="fileUpload"/>
        <property name="studioFileUpload" ref="studioFileUpload"/>
        <property name="roundType" value="FINAL" />
        <property name="s3Bucket" value="@aws_s3_bucket@"/>
    </bean>

    <bean id="saveSoftwareCheckpointReviewAction"
        class="com.topcoder.direct.services.view.action.contest.SaveSoftwareCheckpointReviewAction"
        scope="prototype" parent="baseDirectStrutsAction"></bean>
        
    <bean id="viewWireframeSubmissionAction"
        class="com.topcoder.direct.services.view.action.contest.ViewWireframeSubmissionAction"
        scope="prototype" parent="baseDirectStrutsAction">
        <property name="studioSubmissionBase" value="@studio.submission.base@"/>
        <property name="userService" ref="userService"/>
        <property name="wireframeDirectory" value="@wireframeDirectory@"/>
    </bean>
    
    <bean id="downloadSoftwareSubmissionAction"
          class="com.topcoder.direct.services.view.action.contest.DownloadSoftwareSubmissionAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="fileUpload" ref="fileUpload"/>
        <property name="studioFileUpload" ref="studioFileUpload"/>
        <property name="s3Bucket" value="@aws_s3_bucket@"/>
    </bean>

   <bean id="downloadFinalFix"
          class="com.topcoder.direct.services.view.action.contest.DownloadFinalFixAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="fileUpload" ref="fileUpload"/>
    </bean>

     <bean id="updateUserPreferencesAction"
      class="com.topcoder.direct.services.view.action.setting.notification.UpdateUserPreferencesAction"
      scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="projectContestsHealthAction"
     class="com.topcoder.direct.services.view.action.project.ProjectContestsHealthAction"
     scope="prototype" parent="baseDirectStrutsAction">
   </bean>

    <bean id="createProjectForumAction"
          class="com.topcoder.direct.services.view.action.project.CreateProjectForumAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="getProjectForumsStatusAction"
          class="com.topcoder.direct.services.view.action.project.GetProjectForumsStatusAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="updateProjectForumWatchAction"
          class="com.topcoder.direct.services.view.action.project.UpdateProjectForumWatchAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <!-- configuration for the direct project metadata services and key service -->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <!-- JPA entity manager factory -->
    <bean id="entityManagerFactory"
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="persistenceUnitName" value="projectMetadataPersistenceUnit"/>
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="INFORMIX"/>
            </bean>
        </property>
        <property name="jpaPropertyMap">
            <map>
                <entry key="hibernate.cache.use_query_cache" value="true"/>
            </map>
        </property>
    </bean>

    <!-- metadata key validator -->
    <bean id="directProjectMetadataKeyValidator"
          class="com.topcoder.direct.services.project.metadata.impl.DirectProjectMetadataKeyValidatorImpl">
        <property name="loggerName" value="loggerName"/>
    </bean>

    <!-- metadata validator -->
    <bean id="directProjectMetadataValidator"
          class="com.topcoder.direct.services.project.metadata.impl.DirectProjectMetadataValidatorImpl">
        <property name="loggerName" value="loggerName"/>
        <property name="validatorMapping">
            <map></map>
        </property>
        <property name="predefinedKeys">
            <map>
                <!-- project techonologies has predefined values -->
                <entry key="8" value="true"/>
            </map>
        </property>
    </bean>

    <!-- direct project metadata service -->
    <bean id="directProjectMetadataServices"
          class="com.topcoder.direct.services.project.metadata.impl.DirectProjectMetadataServiceImpl">
        <property name="loggerName" value="loggerName"/>
        <property name="directProjectMetadataValidator" ref="directProjectMetadataValidator"/>
        <property name="auditActionTypeIdMap">
            <map>
                <entry key="create" value="1"/>
                <entry key="update" value="2"/>
                <entry key="delete" value="3"/>
            </map>
        </property>
    </bean>

    <!-- direct project metadata key service -->
    <bean id="directProjectMetadataKeyService"
          class="com.topcoder.direct.services.project.metadata.impl.DirectProjectMetadataKeyServiceImpl">

        <property name="loggerName" value="loggerName"/>
        <property name="directProjectMetadataKeyValidator" ref="directProjectMetadataKeyValidator"/>
        <property name="auditActionTypeIdMap">
            <map>
                <entry key="create" value="1"/>
                <entry key="update" value="2"/>
                <entry key="delete" value="3"/>
            </map>
        </property>
    </bean>

     <!-- project metadata action, used for demo only -->
    <bean id="projectMetadataAction"
          class="com.topcoder.direct.services.view.action.project.metadata.ProjectMetadataAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="metadataKeyService" ref="directProjectMetadataKeyService"/>
        <property name="metadataService" ref="directProjectMetadataServices"/>
    </bean>
    <!-- project fee -->
    <bean id="projectFeeSessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="hibernateProperties">
            <value>
                hibernate.dialect=org.hibernate.dialect.InformixDialect
                hibernate.show_sql=false
            </value>
        </property>
    </bean>

    <tx:annotation-driven transaction-manager="projectFee" />
    <bean id="projectFee" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="projectFeeSessionFactory"/>
    </bean>

    <bean name="contestFeePersistence" class="com.topcoder.clients.dao.impl.ProjectContestFeeDAOImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.ProjectContestFeeDAOImpl"/>
        <property name="sessionFactory" ref="projectFeeSessionFactory"/>
    </bean>

    <bean name="contestFeeService" class="com.topcoder.clients.dao.impl.ProjectContestFeeServiceImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.ProjectContestFeeServiceImpl"/>
        <property name="persistence" ref="contestFeePersistence"/>
    </bean>

    <bean name="contestFeePercentageService" class="com.topcoder.clients.dao.impl.ProjectContestFeePercentageServiceImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.ProjectContestFeePercentageServiceImpl"/>
        <property name="persistence" ref="contestFeeFeePercentagePersistence"/>
    </bean>

    <bean name="contestFeeFeePercentagePersistence" class="com.topcoder.clients.dao.impl.ProjectContestFeePercentageDAOImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.ProjectContestFeePercentageDAOImpl"/>
        <property name="sessionFactory" ref="projectFeeSessionFactory"/>
    </bean>

    <bean name="customerPlatformFeeService" class="com.topcoder.clients.dao.impl.CustomerPlatformFeeServiceImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.CustomerPlatformFeeServiceImpl"/>
        <property name="persistence" ref="customerPlatformFeePersistence"/>
    </bean>

    <bean name="customerPlatformFeePersistence" class="com.topcoder.clients.dao.impl.CustomerPlatformFeeDAOImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.CustomerPlatformFeeDAOImpl"/>
        <property name="sessionFactory" ref="projectFeeSessionFactory"/>
    </bean>

    <bean name="clientInvoiceUploadPersistence" class="com.topcoder.clients.dao.impl.ClientInvoiceUploadDAOImpl" scope="prototype">
        <property name="loggerName" value="com.topcoder.clients.dao.impl.ClientInvoiceUploadDAOImpl"/>
        <property name="sessionFactory" ref="projectFeeSessionFactory"/>
    </bean>

    <bean name="customerPlatformFeeAction" class="com.topcoder.direct.services.view.action.accounting.CustomerPlatformFeeAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.action.accounting.CustomerPlatformFeeAction"/>
        <property name="customerPlatformFeeService" ref="customerPlatformFeeService"/>
    </bean>
    
    <bean name="contestFeesHomeAction" class="com.topcoder.direct.services.view.action.accounting.ContestFeesHomeAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.actions.ContestFeesHomeAction"/>
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean name="createFeesHomeAction" class="com.topcoder.direct.services.view.action.accounting.CreateFeesHomeAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.actions.ContestFeesHomeAction"/>
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean name="listBillingProjectContestFeesAction" parent="baseDirectStrutsAction"
          class="com.topcoder.direct.services.view.action.accounting.ListBillingProjectContestFeesAction"
          scope="prototype">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.actions.ContestFeesHomeAction"/>
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
    </bean>

    <bean name="saveContestFeesAction" parent="baseDirectStrutsAction"
          class="com.topcoder.direct.services.view.action.accounting.SaveContestFeesAction"
          scope="prototype">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.actions.ContestFeesHomeAction"/>
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
        <property name="directProjectService" ref="groupProjectService"/>
    </bean>

    <bean name="createContestFeesAction" parent="baseDirectStrutsAction"
          class="com.topcoder.direct.services.view.action.accounting.CreateContestFeesAction"
          scope="prototype">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.actions.ContestFeesHomeAction"/>
        <property name="contestFeeService" ref="contestFeeService"/>
        <property name="contestFeePercentageService" ref="contestFeePercentageService"/>
        <property name="directProjectService" ref="groupProjectService"/>
    </bean>

    <bean name="contestFeeAuthorizationProvider" class="com.topcoder.direct.services.view.util.ContestFeeAuthorizationProvider" scope="prototype">
        <property name="loggerName" value="com.topcoder.direct.services.view.util.ContestFeeAuthorizationProvider"/>
    </bean>

    <bean name="contestFeeAccessInterceptor" class="com.topcoder.direct.services.view.action.accounting.ContestFeeAccessInterceptor" scope="prototype">
        <property name="loggerName" value="com.topcoder.accounting.fees.view.interceptor.ContestFeeAccessInterceptor"/>
        <property name="contestFeeAuthorizationProvider" ref="contestFeeAuthorizationProvider"/>
    </bean>

    <bean id="getACopilotAction"
          class="com.topcoder.direct.services.view.action.copilot.GetACopilotAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="copilotProfileDAO" ref="copilotProfileDAO"/>
    </bean>

    <bean id="getCopilotStatisticsAction"
      class="com.topcoder.direct.services.view.action.copilot.GetCopilotStatisticsAction"
      scope="prototype" parent="baseDirectStrutsAction">
      <property name="copilotProfileDAO" ref="copilotProfileDAO"/>
    </bean>
  
    <bean id="submitApprovalAction"
          class="com.topcoder.direct.services.view.action.contest.SubmitApprovalAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>
    <bean id="addProjectForumAction" class="com.topcoder.direct.services.view.action.project.AddProjectForumAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>
    <bean id="deleteProjectForumsAction" class="com.topcoder.direct.services.view.action.project.DeleteProjectForumsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="paypalService" class="com.topcoder.direct.services.payments.impl.PayPalServiceImpl">
        <property name="baseUrl" value="@paypal.baseUrl@"/>
        <property name="username" value="@paypal.username@"/>
        <property name="password" value="@paypal.password@"/>
        <property name="signature" value="@paypal.signature@"/>
    </bean>
    
    <bean id="payoneerService" class="@payoneerService@">
        <property name="baseApiUrl" value="@payoneer.baseApiUrl@"/>
        <property name="username" value="@payoneer.username@"/>
        <property name="password" value="@payoneer.password@"/>
        <property name="partnerId" value="@payoneer.partnerId@"/>
    </bean>

    <bean id="westernUnionService" class="com.topcoder.direct.services.payments.impl.WesternUnionServiceFileImpl" scope="singleton">
        <property name="westernUnionBalanceFileName" value="@westernUnionBalanceFileName@"/>
    </bean>
        
    <bean id="pullablePaymentsService" class="com.topcoder.direct.services.payments.impl.PullablePaymentsServiceImpl">
        <property name="paypalService" ref="paypalService"/>
        <property name="payoneerService" ref="payoneerService"/>
        <property name="westernUnionService" ref="westernUnionService"/>
    </bean>
    
    <bean id="paymentsService" class="com.topcoder.direct.services.payments.impl.PaymentsServiceImpl"/>
    
    <bean id="paymentStatsService" class="com.topcoder.direct.services.payments.impl.PaymentStatsServiceImpl">
        <property name="defaultResultLimit" value="@paymemtStatsService.resultLimit@"/>
    </bean>

    <bean id="assetService"
          class="com.topcoder.asset.services.impl.AssetServiceImpl">
        <property name="entityManager" ref="assetEntityManager"/>
        <property name="log" ref="log"/>
        <property name="assetVersionService" ref="assetVersionService"/>
    </bean>

    <bean id="assetVersionService"
          class="com.topcoder.asset.services.impl.AssetVersionServiceImpl">
        <property name="entityManager" ref="assetEntityManager"/>
        <property name="log" ref="log"/>
        <property name="basePath" value="@assetUploadBasePath@"/>
        <property name="imageTypes">
            <list>
                <value>jpg</value>
                <value>png</value>
                <value>bmp</value>
            </list>
        </property>
        <property name="previewImageWidth" value="500"/>
        <property name="previewImageHeight" value="400"/>
    </bean>

    <bean id="assetCategoryService"
          class="com.topcoder.asset.services.impl.AssetCategoryServiceImpl">
        <property name="entityManager" ref="assetEntityManager"/>
        <property name="log" ref="log"/>
    </bean>

    <bean id="assetFileTypeIconService"
          class="com.topcoder.asset.services.impl.FileTypeIconServiceImpl">
        <property name="entityManager" ref="assetEntityManager"/>
        <property name="log" ref="log"/>
    </bean>

    <bean id="assetManagerService"
          class="com.topcoder.asset.services.impl.ManagerServiceImpl">
        <property name="entityManager" ref="assetEntityManager"/>
        <property name="log" ref="log"/>
    </bean>

    <bean id="baseAbstractAssetAction" abstract="true"
          class="com.topcoder.direct.services.view.action.asset.BaseAbstractAssetAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="assetService" ref="assetService"/>
        <property name="assetVersionService" ref="assetVersionService"/>
        <property name="assetCategoryService" ref="assetCategoryService"/>
        <property name="fileTypeIconService" ref="assetFileTypeIconService"/>
        <property name="managerService" ref="assetManagerService"/>
    </bean>

    <bean id="projectAccessInterceptor"
          class="com.topcoder.direct.services.view.interceptor.ProjectAccessInterceptor"
          scope="prototype">
        <property name="metadataService" ref="directProjectMetadataServices"/>
    </bean>

    <bean id="projectAssetsAction"
          class="com.topcoder.direct.services.view.action.asset.project.ProjectAssetsAction"
          scope="prototype" parent="baseAbstractAssetAction">
    </bean>

    <bean id="projectAssetVersionsAction"
          class="com.topcoder.direct.services.view.action.asset.project.ProjectAssetVersionsAction"
          scope="prototype" parent="baseAbstractAssetAction">
    </bean>

    <bean id="assetImageViewAction"
          class="com.topcoder.direct.services.view.action.asset.project.AssetImageViewAction"
          scope="prototype" parent="baseAbstractAssetAction">
    </bean>

    <bean id="projectAssetManageAction"
          class="com.topcoder.direct.services.view.action.asset.project.ProjectAssetManageAction"
          scope="prototype" parent="baseAbstractAssetAction">
        <property name="assetUploadTempFileRoot" value="@assetUploadTempFileRoot@"></property>
        <property name="transactionManager" ref="assetTransactionManager"/>
    </bean>

    <bean id="paymentLogger" class="com.topcoder.util.log.LogManager"
        factory-method="getLog">
        <constructor-arg value="paymentLogger" />
    </bean>
    
    <bean id="basePaymentAction"
          class="com.topcoder.direct.view.action.payments.BaseAction"
          abstract="true">
        <property name="logger" ref="paymentLogger"/>
    </bean>    
    
    <bean id="pullablePaymentsAction" class="com.topcoder.direct.services.view.action.payments.PullablePaymentsAction" parent="basePaymentAction">
        <property name="pullablePaymentsService" ref="pullablePaymentsService"/>
    </bean>
    
    <bean id="paymentStatusDetailsAction" class="com.topcoder.direct.services.view.action.payments.PaymentStatusDetailsAction" parent="basePaymentAction">
        <property name="paymentsService" ref="paymentsService"/>
        <property name="paymentsByStatusByDays" value="@paymentsByStatusByDays@"/>
    </bean>    
    
    <bean id="potentialCashOutFlowDetailsAction" class="com.topcoder.direct.services.view.action.payments.PotentialCashOutFlowDetailsAction" parent="basePaymentAction">
        <property name="paymentsService" ref="paymentsService"/>
    </bean>     
    
    <bean id="paymentsHistoryAction" class="com.topcoder.direct.services.view.action.payments.PaymentsHistoryAction" parent="basePaymentAction">
        <property name="paymentsService" ref="paymentsService"/>
    </bean>        
    
    <bean id="topMemberPaymentsStatsAction" class="com.topcoder.direct.services.view.action.payments.TopMemberPaymentsStatsAction" parent="basePaymentAction">
        <property name="paymentStatsService" ref="paymentStatsService"/>
    </bean>        
    
    <bean id="memberPaymentStatsAction" class="com.topcoder.direct.services.view.action.payments.MemberPaymentStatsAction" parent="basePaymentAction">
        <property name="paymentStatsService" ref="paymentStatsService"/>
    </bean>

    <bean id="paymentOverviewAction" class="com.topcoder.direct.services.view.action.payments.PaymentOverviewAction" parent="basePaymentAction"/>

    <bean id="oAuthGrantAccessInterceptor"
          class="com.topcoder.direct.services.view.action.analytics.common.OAuthGrantAccessInterceptor">
        <property name="authorizationURL" value="@oauth.authorizationURL@"/>
        <property name="callBackActionUrl" value="@oauth.callBackActionUrl@"/>
        <property name="consumerKey" value="@oauth.consumerKey@"/>
        <property name="consumerSecret" value="@oauth.consumerSecret@"/>
        <property name="providerClass" value="@oauth.providerClass@"/>
    </bean>

    <bean id="marathonMatchViewAction"
          class="com.topcoder.direct.services.view.action.analytics.longcontest.MarathonMatchViewAction"
          scope="prototype">
<!--
        <property name="marathonMatchAnalyticsService" ref="marathonMatchAnalyticsService"/>
-->
        <property name="contestServiceFacade" ref="contestServiceFacade"/>
        <property name="timelineInterval" value="1"/>
        <property name="submissionHistoryInterval" value="20"/>
    </bean>

    <bean id="marathonMatchResultsViewAction"
          class="com.topcoder.direct.services.view.action.analytics.longcontest.MarathonMatchResultsViewAction"
          scope="prototype">
<!--
        <property name="marathonMatchAnalyticsService" ref="marathonMatchAnalyticsService"/>
-->
        <property name="contestServiceFacade" ref="contestServiceFacade"/>
        <property name="timelineInterval" value="1"/>
    </bean>

    <bean id="marathonMatchRoundIdAction" class="com.topcoder.direct.services.view.action.analytics.longcontest.MarathonMatchRoundIdAction" scope="prototype"/>

    <!--
    <bean id="marathonMatchAnalyticsService"
          class="com.topcoder.direct.services.view.action.analytics.longcontest.services.impl.MarathonMatchAnalyticsServiceImpl"
          init-method="checkInit">
        <property name="remoteServiceBaseUrl" value="http://@api_server_domain@/rest"/>
        <property name="getMMBasicInfoEndPointUrl" value="/analytics/{round_id}"/>
        <property name="getMMRegistrantsEndPointUrl" value="/analytics/{round_id}/registrants"/>
        <property name="getCompetitorDetailsEndPointUrl" value="/analytics/{round_id}/registrants/{handle}"/>
        <property name="getMatchResultsEndPointUrl" value="/analytics/{round_id}/results"/>
        <property name="getAllMMSubmissionsEndPointUrl" value="/analytics/{round_id}/registrants/{handle}/submissions"/>
        <property name="getMarathonMatchListingsEndPointUrl" value="/analytics/"/>
        <property name="getSystemTestsResultsEndPointUrl" value="/analytics/{round_id}/results/tests"/>
        <property name="clientId" value="@clientId@"/>
        <property name="clientSecret" value="@clientSecret@"/>
        <property name="apiKey" value="@apiKey@"/>
    </bean>
    -->

    <bean id="needFinalFixAction"
          class="com.topcoder.direct.services.view.action.contest.studio.NeedFinalFixAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="saveFinalFixAction"
          class="com.topcoder.direct.services.view.action.contest.studio.SaveFinalFixItemsAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="reviewFinalFixAction"
          class="com.topcoder.direct.services.view.action.contest.studio.ReviewFinalFixAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="viewFinalFixAction"
          class="com.topcoder.direct.services.view.action.contest.studio.ViewFinalFixAction"
          scope="prototype" parent="baseDirectStrutsAction">
    </bean>

    <bean id="myCreatedChallengesAction"
          class="com.topcoder.direct.services.view.action.my.MyCreatedChallengesAction" scope="prototype">
        <property name="serviceURL" value="@directChallengeServicesApiUrl@"/>
        <property name="userService" ref="userService"/>
    </bean>

    <bean id="myChallengesAction"
          class="com.topcoder.direct.services.view.action.my.MyChallengesAction" scope="prototype">
        <property name="serviceURL" value="@directChallengeServicesApiUrl@"/>
    </bean>

    <bean id="xmlPhaseTemplatePersistence"
          class="com.topcoder.project.phases.template.persistence.XmlPhaseTemplatePersistence"
          scope="prototype">
        <constructor-arg>
            <list>
                <value>phase_templates/TCSTemplate_Design.xml</value>
                <value>phase_templates/TCSTemplate_Development.xml</value>
                <value>phase_templates/TCSTemplate_Application.xml</value>
                <value>phase_templates/TCSTemplate_Component_Testing.xml</value>
                <value>phase_templates/TCSTemplate_Studio.xml</value>
                <value>phase_templates/TCSTemplate_SpecReview.xml</value>
                <value>phase_templates/TCSTemplate_Copilot_Posting.xml</value>
                <value>phase_templates/TCSTemplate_Marathon_Match.xml</value>
                <value>phase_templates/TCSTemplate_Bug_Hunt.xml</value>
                <value>phase_templates/TCSTemplate_F2F.xml</value>
                <value>phase_templates/TCSTemplate_Code.xml</value>
                <value>phase_templates/TCSTemplate_Design_F2F.xml</value>
            </list>
        </constructor-arg>
    </bean>

    <bean id="startDateGenerator" class="com.topcoder.project.phases.template.startdategenerator.RelativeWeekTimeStartDateGenerator"
          scope="prototype">
        <constructor-arg type="int" value="1"/>
        <constructor-arg type="int" value="5"/>
        <constructor-arg type="int" value="9"/>
        <constructor-arg type="int" value="0"/>
        <constructor-arg type="int" value="0"/>
    </bean>

    <bean id="workdays" class="com.topcoder.date.workdays.DefaultWorkdays" scope="prototype">
    </bean>

    <bean id="templateManager" class="com.topcoder.project.phases.template.DefaultPhaseTemplate">
        <constructor-arg ref="xmlPhaseTemplatePersistence"/>
        <constructor-arg ref="startDateGenerator"/>
        <constructor-arg ref="workdays"/>
    </bean>
    
    <bean id="getGroupMemberAction" class="com.topcoder.direct.services.view.action.contest.launch.GetGroupMemberAction"
          scope="prototype" parent="baseDirectStrutsAction">
        <property name="groupApiEndpoint" value="@groupMemberApiUrl@"/>
    </bean>
</beans>
